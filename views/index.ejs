<%- include('partials/header') %>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<embed src="/music/good_enough.mp3" width="180" height="90" loop="false" autostart="false" hidden="true" />
<div class="container">
  <h1> Study Time Tracker </h1>
  
  <div class="pixel-panel">
    <div class="display">
      <div class="time-display" id="currentSession">00:00:00</div>
      <br>
      <div class="stats">
        <div>📅 Hoje: <span id="todayTotal">0h 0m</span></div>
        <div>📊 Semana: <span id="weekTotal">0h 0m</span></div>
        <br>
      </div>
    </div>
    
    <button class="button" id="startStopButton">▶️ Iniciar Estudo</button>
  </div>
  <br>
  <div class="pixel-panel history">
    <h2>📜 Histórico de Sessões</h2>
    <div id="sessionsList">
      <% sessions.forEach(session => { %>
        <div class="session-item">
          ⏱️ <%= session.startTime.toLocaleString() %> 
          <% if(session.endTime) { %>
            - <%= session.endTime.toLocaleTimeString() %> 
            (<%= Math.round((session.endTime - session.startTime)/60000) %>m)
          <% } else { %>
            (Em andamento)
          <% } %>
        </div>
      <% }) %>
    </div>
  </div>
</div>
<script src="/js/app.js"></script>